_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[18],{"8Dvy":function(t,e,n){"use strict";n.r(e);var a=n("h4VS"),o=n("1OyB"),i=n("vuIU"),r=n("JX7q"),c=n("Ji7U"),s=n("md7G"),l=n("foSv"),d=n("rePB"),u=n("nKUr"),b=n("q1tI"),f=n("8Kt/"),j=n.n(f),h=n("nOHt"),g=n.n(h),m=n("YFqc"),p=n.n(m),x=(n("HuT5"),n("d0xl")),O=n("CafY"),v=n("S7XH"),y=n("FGyW"),w=n("QojX"),C=n("cWnB"),S=n("7vrA"),k=n("XWsC"),_=n("3Z9Z"),B=n("JI6e"),F=n("6xyR"),P=n("ma3e"),U=n("KYPV"),T=n("UGp+"),G=n("Y1ui"),N=n.n(G),H=n("d76Q"),R=n.n(H),D=n("vOnD"),z=n("baXo"),I=n.n(z);function L(){var t=Object(a.a)(["\n      padding: 10px;\n      display: block;\n      width: 100%;\n\n      p {\n        font-size: 14px;\n        font-weight: 400;\n        word-break: break-all;\n      }\n    "]);return L=function(){return t},t}function V(){var t=Object(a.a)(["\n      border-top-left-radius: 0;\n      border-bottom-left-radius: 0;\n      border-top-right-radius: 5px;\n      border-bottom-right-radius: 5px;\n      height: 34px;\n      width: 32px;\n      text-align: center;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    "]);return V=function(){return t},t}function A(){var t=Object(a.a)(["\n      font-size: 14px;\n      height: 34px;\n      width: 250px;\n      border-radius: 3px;\n      border-top-left-radius: 5px;\n      border-bottom-left-radius: 5px;\n      border-top-right-radius: 0;\n      border-bottom-right-radius: 0;\n      border: 1px solid #e5e5e5;\n      padding: 0 32px 0 16px;\n      &:hover {\n        cursor: pointer;\n      }\n    "]);return A=function(){return t},t}function X(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=Object(l.a)(t);if(e){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var E={lines:13,length:20,width:10,radius:30,scale:.35,corners:1,color:"#fff",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"},J=T.b({foto:T.a().required()}),K=function(t){Object(c.a)(n,t);var e=X(n);function n(t){var a;return Object(o.a)(this,n),a=e.call(this,t),Object(d.a)(Object(r.a)(a),"componentDidMount",(function(){v.a.GetBlog().then((function(t){t.data.length>0?setTimeout((function(){return a.setState({Blog:t.data,loading:!1})}),100):setTimeout((function(){return a.setState({error:"No Data Found",loading:!1})}),100)})).catch((function(t){console.log(t.response)})),v.a.GetCategory().then((function(t){a.setState({Category:t.data,loading:!1})}))})),a.state={Blog:[],Category:[],foto:"",file:{foto:""},fotoPreviewUrl:"",url:Object(x.a)(),loading:!0},a}return Object(i.a)(n,[{key:"render",value:function(){var t=this,e=[{name:"ID",selector:"id",sortable:!0},{name:"Gambar",sortable:!0,cell:function(e){return Object(u.jsx)(u.Fragment,{children:null!=e.post_image?Object(u.jsx)("img",{src:t.state.url+e.post_image,width:"60",alt:"",onClick:function(){t.dialog.show({title:"Ganti Gambar Post",body:[Object(u.jsx)(U.a,{initialValues:{id:e.id,foto:e.post_image},onSubmit:function(t,e){v.a.PutBlogImage({id:t.id,foto:t.foto.name}).then((function(t){1===t.status&&(y.b.success("Data berhasil disimpan",{position:"top-center"}),window.location.href="/admin/blog")})),v.a.PostFoto(t.foto,t.foto.name).then((function(t){console.log("img_ok")})),setTimeout((function(){e.setSubmitting(!0)}),1e3)},validationSchema:J,children:function(n){var a=n.handleSubmit,o=(n.handleChange,n.handleBlur),i=n.setFieldValue,r=(n.values,n.touched),c=n.errors,s=n.isSubmitting;return Object(u.jsxs)(w.a,{noValidate:!0,onSubmit:a,children:[Object(u.jsxs)(w.a.Group,{children:[Object(u.jsx)(w.a.Label,{children:"Gambar Post"}),Object(u.jsx)("br",{}),Object(u.jsx)("img",{src:t.state.url+e.post_image,className:"img-fluid",width:"200"})]}),Object(u.jsxs)(w.a.Group,{children:[Object(u.jsx)(w.a.Label,{htmlFor:"foto",children:"Upload Gambar"}),Object(u.jsx)(w.a.File,{className:"form-control",name:"foto",id:"foto",onChange:function(e){i("foto",e.currentTarget.files[0]),t.setState({fotoPreviewUrl:URL.createObjectURL(e.currentTarget.files[0])})},onBlur:o,isInvalid:!!c.foto&&r.foto}),c.foto&&r.foto&&Object(u.jsx)("div",{className:"error",children:c.foto}),t.state.fotoPreviewUrl?Object(u.jsx)("img",{src:t.state.fotoPreviewUrl,width:"200",alt:"",className:"mt-2 img-fluid"}):""]}),Object(u.jsxs)(C.a,{variant:"primary",type:"submit",disabled:s,children:[Object(u.jsx)(P.o,{})," Upload"]})]})}},e.id)],bsSize:"lg",actions:[I.a.CancelAction((function(){console.log("Cancel was clicked!")}))],onHide:function(t){t.hide(),console.log("closed by clicking background.")}})}}):Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("img",{src:"/images/no-image.png",width:"60",alt:"",onClick:function(){t.dialog.show({title:"Ganti Gambar Post",body:[Object(u.jsx)(U.a,{initialValues:{id:e.id,foto:e.post_image},onSubmit:function(t,e){v.a.PutBlogImage({id:t.id,foto:t.foto.name}).then((function(t){1===t.status&&(y.b.success("Data berhasil disimpan",{position:"top-center"}),setTimeout((function(){window.location.href="/admin/blog"}),2e3))})),v.a.PostFoto(t.foto,t.foto.name).then((function(t){console.log("img_ok")})),setTimeout((function(){e.setSubmitting(!0)}),1e3)},validationSchema:J,children:function(e){var n=e.handleSubmit,a=(e.handleChange,e.handleBlur),o=e.setFieldValue,i=(e.values,e.touched),r=e.errors,c=e.isSubmitting;return Object(u.jsxs)(w.a,{noValidate:!0,onSubmit:n,children:[Object(u.jsxs)(w.a.Group,{children:[Object(u.jsx)(w.a.Label,{children:"Gambar Post"}),Object(u.jsx)("br",{}),Object(u.jsx)("img",{src:"/images/no-image.png",className:"img-fluid",width:"200"})]}),Object(u.jsxs)(w.a.Group,{children:[Object(u.jsx)(w.a.Label,{htmlFor:"foto",children:"Upload Gambar"}),Object(u.jsx)(w.a.File,{className:"form-control",name:"foto",id:"foto",onChange:function(e){o("foto",e.currentTarget.files[0]),t.setState({fotoPreviewUrl:URL.createObjectURL(e.currentTarget.files[0])})},onBlur:a,isInvalid:!!r.foto&&i.foto}),r.foto&&i.foto&&Object(u.jsx)("div",{className:"error",children:r.foto}),t.state.fotoPreviewUrl?Object(u.jsx)("img",{src:t.state.fotoPreviewUrl,width:"200",alt:"",className:"mt-2 img-fluid"}):""]}),Object(u.jsxs)(C.a,{variant:"primary",type:"submit",disabled:c,children:[Object(u.jsx)(P.o,{})," Upload"]})]})}},e.id)],bsSize:"lg",actions:[I.a.CancelAction((function(){console.log("Cancel was clicked!")}))],onHide:function(t){t.hide(),console.log("closed by clicking background.")}})}})})})}},{name:"Judul Blog",selector:"title",sortable:!0,cell:function(t){return Object(u.jsx)(u.Fragment,{children:t.title})}},{name:"Kategori",sortable:!0,cell:function(e){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(U.a,{initialValues:{id:e.id,category_id:""},onSubmit:function(t,e){alert("Apakah anda yakin akan mengubah data ini?"),v.a.PutBlogCategory(t).then((function(t){1===t.status&&y.b.success("Data berhasil disimpan",{position:"top-center"})})).catch((function(t){console.log(t.response),y.b.warn("Tidak ada data yang diubah",{position:"top-center"})})),setTimeout((function(){e.setSubmitting(!1)}),1e3)},children:function(n){var a=n.handleSubmit,o=n.handleChange,i=n.handleBlur,r=(n.values,n.touched,n.errors,n.isSubmitting);return Object(u.jsx)(w.a,{onChange:a,children:Object(u.jsxs)(w.a.Control,{as:"select",name:"category_id",onChange:o,defaultValue:e.category_id,onBlur:i,size:"sm",children:[Object(u.jsx)("option",{value:"",children:"Choose Category"}),t.state.Category.map((function(t,e){return Object(u.jsx)("option",{value:t.id,children:r?"menunggu..":t.name},e)}))]})})}})})}},{name:"Aksi",sortable:!1,cell:function(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(p.a,{href:"/admin/blog/edit/"+e.id,passHref:!0,children:Object(u.jsx)(C.a,{size:"sm",title:"Edit",alt:"Edit",children:Object(u.jsx)(P.h,{})})}),"\xa0",Object(u.jsx)(C.a,{onClick:function(){t.dialog.show({title:"Konfirmasi",body:"Apakah anda yakin akan menghapus data ini?",bsSize:"lg",actions:[I.a.CancelAction((function(){console.log("Cancel was clicked!")})),I.a.OKAction((function(){v.a.DeleteBlog(e.id).then((function(t){1===t.status?(y.b.success("Hapus data berhasil",{position:"top-center"}),setTimeout((function(){g.a.push("/admin/blog")}),2e3)):console.log("gagal")}))}))],onHide:function(t){t.hide(),console.log("closed by clicking background.")}})},variant:"danger",size:"sm",title:"Hapus",alt:"Hapus",children:Object(u.jsx)(P.n,{})})]})}}],n={rows:{style:{fontSize:"1rem"}},headCells:{style:{fontSize:"1rem"}},cells:{style:{fontSize:"1rem"}}},a=D.default.input(A()),o=Object(D.default)(C.a)(V()),i=D.default.div(L()),r=function(t){var e=t.data;return Object(u.jsx)(i,{children:Object(u.jsxs)("p",{children:["Tanggal dibuat: ",e.created_at?e.created_at:"-",Object(u.jsx)("br",{}),"Tanggal diubah: ",e.updated_at?e.updated_at:"-",Object(u.jsx)("br",{})]})})},c=function(t){var e=t.filterText,n=t.onFilter,i=t.onClear;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(p.a,{href:"/admin/blog/create",passHref:!0,children:Object(u.jsx)(C.a,{variant:"primary",style:{position:"absolute",left:"0",marginLeft:"15px"},children:"Tambah Blog"})}),Object(u.jsx)(a,{id:"search",type:"text",placeholder:"Filter By Judul","aria-label":"Search Input",value:e,onChange:n}),Object(u.jsx)(o,{variant:"secondary",type:"button",onClick:i,children:"X"})]})},s=function(){var a=Object(b.useState)(""),o=a[0],i=a[1],s=Object(b.useState)(!1),l=s[0],d=s[1],f=t.state.Blog.filter((function(t){return t.title&&t.title.toLowerCase().includes(o.toLowerCase())})),j=Object(b.useMemo)((function(){return Object(u.jsx)(c,{onFilter:function(t){return i(t.target.value)},onClear:function(){o&&(d(!l),i(""))},filterText:o})}),[o,l]);return Object(u.jsx)(R.a,{title:"Semua Blog Post",columns:e,data:f,pagination:!0,paginationResetDefaultPage:l,subHeader:!0,subHeaderComponent:j,persistTableHead:!0,expandableRows:!0,expandOnRowClicked:!0,expandableRowsComponent:Object(u.jsx)(r,{}),customStyles:n})};return Object(u.jsxs)(O.a,{admin:!0,children:[Object(u.jsx)(j.a,{children:Object(u.jsxs)("title",{children:["Blog - ",O.c]})}),Object(u.jsxs)(S.a,{fluid:!0,children:[Object(u.jsxs)(k.a,{className:"my-3",children:[Object(u.jsx)(k.a.Item,{children:"Home"}),Object(u.jsx)(k.a.Item,{active:!0,children:"Blog"})]}),Object(u.jsx)(_.a,{children:Object(u.jsx)(B.a,{children:Object(u.jsx)(F.a,{body:!0,children:this.state.loading?Object(u.jsx)(N.a,{options:E,className:"spinner"}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(s,{}),Object(u.jsx)(I.a,{ref:function(e){t.dialog=e}})]})})})})]})]})}}]),n}(b.Component);e.default=K},UUFO:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/blog",function(){return n("8Dvy")}])}},[["UUFO",1,2,4,0,3,5,6,7,8,10]]]);